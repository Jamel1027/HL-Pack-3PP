<?xml version="1.0" encoding="UTF-8"?>
<document signature="Hero Lab Data">
  <loadonce key="COM_3PPPack_RGG - Class, The Talented Monk"/>
  <thing id="cHelpRG1" name="Monk, Talented" compset="Class" uniqueness="unique">
    <fieldval field="cHDSides" value="8"/>
    <fieldval field="srcPageNum" value="1"/>
    <fieldval field="srcBookInf" value="The Genius Guide to the Talented Monk"/>
    <fieldval field="cAbbr" value="Tmk"/>
    <fieldval field="cSkills" value="4"/>
    <fieldval field="cSpecSing" value="Monk Edge"/>
    <fieldval field="cSpec2ndSi" value="Monk Talent"/>
    <fieldval field="cBonFtNm" value="Combat Feat"/>
    <fieldval field="cSpec5thSi" value="Fighting Style"/>
    <arrayval field="cCustTot" index="0" value="3"/>
    <arrayval field="cCustTot" index="1" value="4"/>
    <arrayval field="cCustTot" index="2" value="5"/>
    <arrayval field="cCustTot" index="3" value="6"/>
    <arrayval field="cCustTot" index="7" value="7"/>
    <arrayval field="cCustTot" index="19" value="8"/>
    <arrayval field="cCustScTot" index="0" value="2"/>
    <arrayval field="cCustScTot" index="1" value="4"/>
    <arrayval field="cCustScTot" index="2" value="6"/>
    <arrayval field="cCustScTot" index="3" value="7"/>
    <arrayval field="cCustScTot" index="4" value="8"/>
    <arrayval field="cCustScTot" index="5" value="9"/>
    <arrayval field="cCustScTot" index="6" value="10"/>
    <arrayval field="cCustScTot" index="8" value="11"/>
    <arrayval field="cCustScTot" index="9" value="12"/>
    <arrayval field="cCustScTot" index="10" value="13"/>
    <arrayval field="cCustScTot" index="11" value="14"/>
    <arrayval field="cCustScTot" index="12" value="15"/>
    <arrayval field="cCustScTot" index="13" value="16"/>
    <arrayval field="cCustScTot" index="14" value="17"/>
    <arrayval field="cCustScTot" index="15" value="18"/>
    <arrayval field="cCustScTot" index="16" value="19"/>
    <arrayval field="cCustScTot" index="17" value="20"/>
    <arrayval field="cCustScTot" index="18" value="21"/>
    <arrayval field="cCustScTot" index="19" value="22"/>
    <usesource source="srcMonkTal"/>
    <tag group="AgeColumn" tag="3"/>
    <tag group="cWill" tag="Good"/>
    <tag group="Classes" tag="RGMonkTal" name="Monk, Talented"/>
    <tag group="cRef" tag="Good"/>
    <tag group="ClassSkill" tag="skAcrobat"/>
    <tag group="ClassSkill" tag="Craft"/>
    <tag group="ClassSkill" tag="Perform"/>
    <tag group="ClassSkill" tag="Profession"/>
    <tag group="ClassSkill" tag="skClimb"/>
    <tag group="ClassSkill" tag="skIntim"/>
    <tag group="ClassSkill" tag="skKnowHist"/>
    <tag group="ClassSkill" tag="skKnowRel"/>
    <tag group="ClassSkill" tag="skRide"/>
    <tag group="ClassSkill" tag="skSenseMot"/>
    <tag group="ClassSkill" tag="skStealth"/>
    <tag group="ClassSkill" tag="skSwim"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="FtCountAs" tag="Monk"/>
    <tag group="AlgnReq" tag="Lawful"/>
    <tag group="AlterClass" tag="cHelpMnk"/>
    <tag group="WepProf" tag="wClub"/>
    <tag group="WepProf" tag="wDagger"/>
    <tag group="WepProf" tag="wHandaxe"/>
    <tag group="WepProf" tag="wCrsHeavy"/>
    <tag group="WepProf" tag="wJavelin"/>
    <tag group="WepProf" tag="wCrsLight"/>
    <tag group="WepProf" tag="wShortspr"/>
    <tag group="WepProf" tag="wShortswd"/>
    <tag group="WepProf" tag="wSling"/>
    <tag group="WepProf" tag="wSpear"/>
    <tag group="fCategory" tag="Combat"/>
    <tag group="cAttack" tag="Medium"/>
    <tag group="cFort" tag="Good"/>
    <bootstrap thing="fWepMnk"></bootstrap>
    <eval phase="First" priority="50000">      
      ~ Remove talented monk levels so that we can add Monk 
      ~ levels. This way we meet pre-req from feats and abilities
      ~ correctly.
      perform hero.delete[Classes.RGMonkTal]</eval>
    <eval phase="Render" priority="99999" index="2"><![CDATA[

      ~ Make Custom List 5 select Fighter Styles
      field[cCstS5Expr].text = "component.BaseCustSp & abCategory.FtrWepTra"]]></eval>
    </thing>
  <thing id="cRGMonkTal" name="Monk, Talented" description="{i}The Genius Guide to the Talented Monk{/i} rewrites the classic monk class to use talents, rather than static class abilities and bonus feats. Rather than require all monks to be masters of unarmed attacks and self- perfection, each monk can have custom-fit class abilities to match a player&apos;s specific concept. This greater flexibility allows the monk to be the default esotericcombat- style- oriented character without limiting it to just one or two styles of fighting. Like a rogue, a talented monk character can pick and choose from a range of similarly-powered abilities appropriate for the monk&apos;s role, without making the class overpowered. The talented monk can still fill the same roles in a party, but can customize his combat style and abilities to fill a much broader range of concepts.\n\n{b}Alignment:{/b} A talented monk may be of any lawful alignment." compset="ClassLevel" maxlimit="20">
    <usesource source="srcMonkTal"/>
    <tag group="Helper" tag="NoPathSoc"/>
    <tag group="ClassType" tag="Normal"/>
    <bootstrap thing="cHelpRG1"></bootstrap>
    <link linkage="helper" thing="cHelpRG1"/>
    <eval phase="First" priority="50001">
      ~ Make us just like the monk class
      perform hero.assign[Classes.Monk]</eval>
    </thing>
  <thing id="cRG1Advice" name="Advice" description="{Sensei} The monk is an acknowledged sensei, a wise teacher able to give valuable advice. The monk&apos;s advice is identical to bardic performance (using oratory), allowing him to inspire courage at 1st level, as a bard of the monk&apos;s level, usable a total number of rounds per day equal to his level + his Wisdom modifier (minimum 1)." compset="CustomSpec" summary="The monk&apos;s advice is identical to bardic performance (using oratory)." uniqueness="unique">
    <usesource source="srcMonkTal"/>
    <tag group="AbilType" tag="Extra"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="SpecSource" tag="cHelpRG1"/>
    <tag group="abCategory" tag="RGGMnkEdge" name="Monk Edge"/>
    <tag group="Usage" tag="DayRound"/>
    <tag group="ChargeCalc" tag="LevelX1"/>
    <tag group="ChargeAttr" tag="aWIS"/>
    <tag group="User" tag="Tracker"/>
    <tag group="ChargeCalc" tag="LevelFull"/>
    <tag group="ChargeCalc" tag="FinalMin1"/>
    <bootstrap thing="cBrdPInsC">
      <autotag group="ClSpecWhen" tag="1"/>
      </bootstrap>
    </thing>
  <thing id="cRG1Basics" name="Basics" description="The monk&apos;s martial arts training has emphasized many of the basics of combat training. The monk may select a combat feat for which he meets the prerequisites, and receive this as a bonus feat. A monk may take this edge more than once. Each time, it grants a new feat as a bonus feat." compset="CustomSpec" uniqueness="unique">
    <usesource source="srcMonkTal"/>
    <tag group="SpecSource" tag="cHelpRG1"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="Helper" tag="SpecUp"/>
    <tag group="fCategory" tag="Combat"/>
    <eval phase="PreLevel" priority="10000">
      ~ Give a bonus Combat Feat
      linkage[table].field[cBonFtMax].value += 1</eval>
    </thing>
  <thing id="cRG1Evasio" name="Evasion" description="The monk can avoid even magical and unusual attacks with great agility. If he makes a successful Reflex saving throw against an attack that normally deals half damage on a successful save, he instead takes no damage. Evasion can be used only if the monk is wearing light armor or no armor. (Monks with the medium armor kata talent are exceptions to this rule.) A helpless monk does not gain the benefit of evasion.\n\nA monk must be at least 2nd level to select this edge." compset="CustomSpec" uniqueness="unique">
    <usesource source="srcMonkTal"/>
    <tag group="SpecSource" tag="cHelpRG1"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="AbilType" tag="Extra"/>
    <tag group="Helper" tag="SpecUp"/>
    <bootstrap thing="cEvasion">
      <autotag group="ClSpecWhen" tag="2"/>
      </bootstrap>
    <exprreq message="Monk level 2+ required."><![CDATA[hero.tagcount[Classes.Monk] >= 2]]></exprreq>
    </thing>
  <thing id="cRG1ExpWea" name="Exploit Weakness" description="{Martial Artist} As a swift action the monk can observe a creature or object to find its weak point by making a Wisdom check and adding his monk level against a DC of 10 + the object&apos;s hardness or the target&apos;s CR. If the check succeeds, the monk gains a +2 bonus on attack rolls until the end of his turn, and any attacks he makes until the end of his turn ignore the creature or object&apos;s DR or hardness. A monk may instead use this ability to analyze the movements and expressions of one creature within 30 feet, granting a bonus on Sense Motive checks and Reflex saves and a dodge bonus to AC against that opponent equal to 1/2 his monk level until the start of his next turn." compset="CustomSpec" uniqueness="unique">
    <fieldval field="abRange" value="30"/>
    <fieldval field="actName" value="Attack"/>
    <fieldval field="actName2" value="Defense"/>
    <usesource source="srcMonkTal"/>
    <tag group="AbilType" tag="Extra"/>
    <tag group="abRange" tag="Feet"/>
    <tag group="abAction" tag="Swift"/>
    <tag group="User" tag="Activation"/>
    <tag group="SpecSource" tag="cHelpRG1"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <eval phase="PostAttr" priority="1000">
      ~ Calculate Wisdom Check
      field[abValue].value += #attrmod[aWIS] + hero.tagcount[Classes.Monk]
      ~ Calculate Attack Bonus
      field[abValue2].value += 2
      ~ 1/2 Monk level to defense
      field[abValue3].value += round(hero.tagcount[Classes.Monk]/2,0,-1)</eval>
    <eval phase="PostAttr" priority="10000" index="2">
      ~ Attack option is active
      if (field[abilActive].value = 1) then
        perform assign[Helper.ChgDisab2]
        hero.child[Attack].field[Bonus].value += field[abValue2].value

      ~..Defense option is active
      elseif (field[abilAct2].value = 1) then
        perform assign[Helper.ChgDisab1]
        hero.child[skSenseMot].field[Bonus].value += field[abValue3].value
        hero.child[svRef].field[Bonus].value += field[abValue3].value
        hero.child[ArmorClass].field[tACDodge].value += field[abValue3].value
      endif</eval>
    </thing>
  <thing id="cRG1FastMo" name="Fast Movement" description="The monk&apos;s land speed is faster than the norm for his race by +10 feet. This benefit applies only when he is not carrying a heavy load. Apply this bonus before modifying the monk&apos;s speed because of any load carried or armor worn (though like all monk talents fast movement cannot be used by a monk in armor without the light armor kata or medium armor kata edges). This bonus stacks with any other bonuses to the monk&apos;s land speed.{br}{br}If the monk is 6th level or higher, his land speed is 20 feet faster than the norm for his race. This increases by another 10 feet for every 3 levels above 6th, to a maximum of 60 feet faster than the norm for his race at 18th level." compset="CustomSpec" uniqueness="unique">
    <usesource source="srcMonkTal"/>
    <tag group="Helper" tag="SpecUp"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="AbilType" tag="Extra"/>
    <tag group="SpecSource" tag="cHelpRG1"/>
    <bootstrap thing="cMnkSpeed">
      <autotag group="ClSpecWhen" tag="12"/>
      </bootstrap>
    <bootstrap thing="cMnkSpeed">
      <autotag group="ClSpecWhen" tag="15"/>
      </bootstrap>
    <bootstrap thing="cMnkSpeed">
      <autotag group="ClSpecWhen" tag="18"/>
      </bootstrap>
    <bootstrap thing="cMnkSpeed">
      <autotag group="ClSpecWhen" tag="1"/>
      </bootstrap>
    <bootstrap thing="cMnkSpeed">
      <autotag group="ClSpecWhen" tag="6"/>
      </bootstrap>
    <bootstrap thing="cMnkSpeed">
      <autotag group="ClSpecWhen" tag="9"/>
      </bootstrap>
    </thing>
  <thing id="cRG1FigSty" name="Fighting Style" description="Most monks are trained in one or more fighting styles, a specific way of using a set of similar weapons to perform martial arts maneuvers. Offensive edges and talents marked with an asterisk* can only be performed with weapons in a weapon group the monk has selected with this edge.\n\nSelect one weapon group below. This list is identical to the weapon group list from {i}The Genius Guide to the Talented Fighter,{/i} with the exception of excluding the siege weapons (no matter how good a monk is, he cannot deliver a stunning fist attack through a catapult) and the addition of the improvised weapon group (which includes anything the GM would allow to be used as an improvised weapon). GMs may add other weapons to any weapon group, or add entirely new groups. The monk is proficient with all weapons in the selected group, and may use his specialty attack bonus (from {b}Table 1: The Talented Monk on page 2{/b}) when making an attack or combat maneuver with one of these weapons, and treats them all as if they had the ki focus ability (allowing him to use abilities and attacks that normally work with unarmed attacks, such as Stunning fist and Punishing Kick, with these weapons). The monk may also deal lethal or nonlethal damage with any weapons in a group he has selected without penalty.\n\nThis edge may be selected more than once. Each time it is selected, it grants proficiency and the ability to use weaponrelated monk edges and talents with weapons of another group." compset="CustomSpec" summary="Trained in single fighter weapon group.">
    <fieldval field="usrCandid1" value="component.BaseCustSp &amp; (abCategory.FtrWepTra|thingid.cRG1WTimpr)"/>
    <usesource source="srcMonkTal"/>
    <tag group="AbilType" tag="Extra"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="SpecSource" tag="cHelpRG1"/>
    <tag group="ChooseSrc1" tag="Thing"/>
    <eval phase="First" priority="20000"><![CDATA[
      ~ If nothing chosen then get out now!
      doneif (field[usrChosen1].ischosen = 0)
      ~ Only process here if we are NOT the improvised weapon
      ~ Group.
      doneif (field[usrChosen1].chosen.tagis[Helper.Improvised] = 1)

      var searchexpr as string
      searchexpr = field[usrChosen1].chosen.tagids[wFtrGroup.?,"|"]

      foreach thing in BaseWep where searchexpr
        perform eachthing.pulltags[WepProf.?]
      nexteach

      perform hero.pushtags[WepProf.?]

      ~ Cycle through and apply the Helper.ExoticProf tag to all examples of
      ~ the chosen weapon on the hero. This is important for the Aldori Dueling
      ~ Sword specifically, and possibly others.
      searchexpr = tagids[WepProf.?,"|"]

      foreach pick in hero from BaseWep where searchexpr
        perform eachpick.assign[Helper.ExoticProf]
      nexteach]]></eval>
    <eval phase="First" priority="20000" index="2"><![CDATA[
      ~ If nothing chosen then get out now!
      doneif (field[usrChosen1].ischosen = 0)
      ~ Only process here if we are the improvised weapon group
      doneif (field[usrChosen1].chosen.tagis[Helper.Improvised] = 0)

      foreach thing in BaseWep where "Helper.Improvised"
        perform eachthing.pulltags[WepProf.?]
      nexteach

      perform hero.pushtags[WepProf.?]

      ~ Cycle through and apply the Helper.ExoticProf tag 
      ~ to all examples of the chosen weapon on the hero. 
      ~ This is important for the Aldori Dueling Sword 
      ~ specifically, and possibly others. Plus improvised
      ~ weapons can be made as "- Custom Weapon -" meaning
      ~ any weapon can suddenly be a improvised weapon.
      var searchexpr as string
      searchexpr = tagids[WepProf.?,"|"] & "|Helper.Improvised"

      foreach pick in hero from BaseWep where searchexpr
        perform eachpick.assign[Helper.ExoticProf]
        perform eachpick.assign[Helper.Proficient]
      nexteach]]></eval>
    <eval phase="Level" index="3">~hero.child[wUnarmed].field[wAttBAB].value += 1
~hero.child[wUnarmed].field[wRanAttBAB].value += 1</eval>
    <eval phase="PostLevel" priority="999999" index="4">hero.child[wUnarmed].field[wAttBAB].value = 7
hero.child[wUnarmed].field[wRanAttBAB].value = 7
hero.child[wUnarmed].field[wNumAttTbl].arrayvalue[0] = 2
hero.child[wUnarmed].field[wNumAttTbl].arrayvalue[1] = 2
hero.child[wUnarmed].field[wNumAttTbl].arrayvalue[2] = 2
hero.child[wUnarmed].field[wNumAttTbl].arrayvalue[3] = 2
hero.child[wUnarmed].field[wNumAttTbl].arrayvalue[5] = 2</eval>
    </thing>
  <thing id="cRG1WTimpr" name="Weapon Training (Improvised)" description="{b}Improvised:{/b} Any improvised weapon, subject to GM approval." compset="CustomSpec" summary="Improvised" uniqueness="unique">
    <comment><![CDATA[Please note this is a helper object only for allowing the "Fighting Style" custom ability to choose the Improvised weapon group for the Talented Monk.]]></comment>
    <fieldval field="shortname" value="Improvised"/>
    <usesource source="srcMonkTal"/>
    <tag group="AbilType" tag="Extra"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="SpecType" tag="Attack"/>
    <tag group="Helper" tag="Improvised"/>
    </thing>
  </document>
